openapi: 3.0.0
info:
    description: Manage your FFTCG collection
    version: 0.1.0
    title: FFTCG collection
servers:
    - url: http://localhost:3000/api/v1
      description: local server
paths:
    /login/google:
        post:
            tags: [login]
            summary: Login with google
            requestBody:
                $ref: '#/components/requestBodies/google'
            responses:
                200:
                    $ref: '#/components/responses/user'
                201:
                    $ref: '#/components/responses/user'
                401:
                    $ref: '#/components/responses/invalidToken'
    /users/{userId}:
        get:
            tags: [user]
            summary: Find user by ID
            parameters:
                - name: userId
                  in: path
                  description: ID of user to return
                  example: 8987518b-f2bb-45e1-bbf7-4e6a35803149
                  required: true
                  schema:
                    type: string
                    format: uuid
                - $ref: '#/components/parameters/authorization'
            responses:
                200:
                    $ref: '#/components/responses/user'
                404:
                    $ref: '#/components/responses/notFound'
                400:
                    $ref: '#/components/responses/badRequest'
                401:
                    $ref: '#/components/responses/invalidToken'
    /cards:
        get:
            tags: [card]
            summary: Get all cards
            parameters:
                -   $ref: '#/components/parameters/authorization'
            responses:
                200:
                    $ref: '#/components/responses/cards'
                400:
                    $ref: '#/components/responses/badRequest'
                401:
                    $ref: '#/components/responses/invalidToken'
    /cards/{code}:
        get:
            tags: [card]
            summary: Find card by code
            parameters:
                -   name: code
                    in: path
                    description: code of card to return
                    example: 1-011C
                    required: true
                    schema:
                        type: string
                -   $ref: '#/components/parameters/authorization'
            responses:
                200:
                    $ref: '#/components/responses/card'
                404:
                    $ref: '#/components/responses/notFound'
                400:
                    $ref: '#/components/responses/badRequest'
                401:
                    $ref: '#/components/responses/invalidToken'
components:
    schemas:
        card:
            properties:
                id:
                    type: string
                    format: uuid
                code:
                    type: string
                element:
                    type: string
                rarity:
                    type: string
                cost:
                    type: string
                power:
                    type: string
                category1:
                    type: string
                category2:
                    type: string
                multicard:
                    type: string
                exBurst:
                    type: string
                name:
                    type: string
                type:
                    type: string
                job:
                    type: string
                text:
                    type: string
            example:
                id: 8987518b-f2bb-45e1-bbf7-4e6a35803149
                code: 1-001H
                element: 火
                rarity: H
                cost: 6
                power: 9000
                category1: X
                category2: I
                multicard: ○
                exBurst: ○
                name: Auron
                type: Avant
                job: Gardien
                text: Lorsqu'Auron inflige des dégâts à votre adversaire, vous pouvez jouer 1 Soutien Feu de votre main sur le terrain dullé.
        user:
            properties:
                id:
                    type: string
                    format: uuid
                firstName:
                    type: string
                lastName:
                    type: string
                email:
                    type: string
                    format: email
                locale:
                    type: string
                userName:
                    type: string
                authenticationType:
                    type: string
                createdAt:
                    type: string
                    format: date-time
                updatedAt:
                    type: string
                    format: date-time
            example:
                id: 8987518b-f2bb-45e1-bbf7-4e6a35803149
                firstName: firstName1
                lastName: lastName1
                email: email1@gmail.com
                locale: fr
                userName: userName1
                authenticationType: google
                createdAt: 2020-08-20 23:04:53.935692
                updatedAt: 2020-08-20 23:04:53.935692
        idToken:
            properties:
                idtoken:
                    required: true
                    type: string
                    example: eyJhbGciOiJSUz...yLe9LNM85DA
                    description: Google token ID
        error:
            properties:
                message:
                    type: string
                    example:
                        - Token expiration date
                        - User not found
    requestBodies:
        google:
            description: id token from goog oauth
            required: true
            content:
                application/json:
                    example: eyJhbGciOiJSUz...yLe9LNM85DA
                    schema:
                        $ref: '#/components/schemas/idToken'
    responses:
        cards:
            description: ok
            content:
                application/json:
                    schema:
                        type: object
                        properties:
                            cards:
                                type: array
                                items:
                                    $ref: '#/components/schemas/card'

        card:
            description: ok
            content:
                application/json:
                    schema:
                        $ref: '#/components/schemas/card'
        user:
            description: ok
            content:
                application/json:
                    schema:
                        $ref: '#/components/schemas/user'
        invalidToken:
            description: invalid token
            content:
                application/json:
                    schema:
                        $ref: '#/components/schemas/error'
        notFound:
            description: entity not found
            content:
                application/json:
                    schema:
                        $ref: '#/components/schemas/error'
        badRequest:
            description: bad request
            content:
                application/json:
                    schema:
                        $ref: '#/components/schemas/error'
    parameters:
        authorization:
            in: header
            name: authorization
            schema:
                type: string
                format: bearer
                required: true
                example: bearer eyJhbGciOiJSUz...yLe9LNM85DA
